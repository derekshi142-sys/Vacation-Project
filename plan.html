<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Your Trip - TravelAI</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="ai-service.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        .slide-up { animation: slideUp 0.5s ease-out; }
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        @keyframes slideUp {
            0% { transform: translateY(20px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }
        .hidden { display: none; }
        .card { background: white; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); padding: 24px; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2 cursor-pointer" onclick="window.location.href='index.html'">
                    <div class="bg-blue-600 p-2 rounded-lg">
                        <i data-lucide="plane" class="h-6 w-6 text-white"></i>
                    </div>
                    <span class="text-xl font-bold text-gray-900">TravelAI</span>
                </div>
                
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">Home</a>
                    <a href="plan.html" class="text-blue-600 bg-blue-50 px-3 py-2 rounded-md text-sm font-medium">Plan Trip</a>
                    <a href="pricing.html" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">Pricing</a>
                    <a href="about.html" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">About</a>
                </nav>
                
                <div class="hidden md:flex items-center">
                    <button onclick="window.location.href='plan.html'" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200">
                        Start Planning
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="min-h-screen bg-gray-50 py-12">
            <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
                <!-- Progress Bar -->
                <div class="mb-8">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm font-medium text-blue-600">Step <span id="currentStep">1</span> of 3</span>
                        <span class="text-sm text-gray-500"><span id="progressPercent">33</span>% Complete</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div id="progressBar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 33%"></div>
                    </div>
                </div>

                <div class="card">
                    <!-- Step 1: Basic Details -->
                    <div id="step1" class="step">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                            <i data-lucide="plane" class="h-6 w-6 mr-2 text-blue-600"></i>
                            Where are you going?
                        </h2>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Destination</label>
                                <input type="text" id="destination" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., Paris, France or Tokyo, Japan">
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
                                    <input type="date" id="startDate" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">End Date</label>
                                    <input type="date" id="endDate" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Number of Travelers</label>
                                <select id="travelers" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    <option value="1">1 Person</option>
                                    <option value="2" selected>2 People</option>
                                    <option value="3">3 People</option>
                                    <option value="4">4 People</option>
                                    <option value="5">5 People</option>
                                    <option value="6">6 People</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Preferences -->
                    <div id="step2" class="step hidden">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                            <i data-lucide="dollar-sign" class="h-6 w-6 mr-2 text-blue-600"></i>
                            What's your style?
                        </h2>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Budget</label>
                                <div class="flex space-x-2">
                                    <input type="number" id="budget" class="flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="5000" value="5000">
                                    <select id="budgetType" class="px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <option value="total" selected>Total Budget</option>
                                        <option value="per_person">Per Person</option>
                                        <option value="per_day">Per Day</option>
                                    </select>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-3">Travel Style</label>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                    <button type="button" class="travel-style p-4 rounded-lg border-2 border-gray-200 hover:border-gray-300 text-left transition-all" data-style="budget">
                                        <div class="font-semibold text-gray-900">Budget Traveler</div>
                                        <div class="text-sm text-gray-600">Hostels, street food, free activities</div>
                                    </button>
                                    <button type="button" class="travel-style p-4 rounded-lg border-2 border-blue-600 bg-blue-50 text-left transition-all" data-style="balanced">
                                        <div class="font-semibold text-gray-900">Balanced</div>
                                        <div class="text-sm text-gray-600">Mix of comfort and value</div>
                                    </button>
                                    <button type="button" class="travel-style p-4 rounded-lg border-2 border-gray-200 hover:border-gray-300 text-left transition-all" data-style="luxury">
                                        <div class="font-semibold text-gray-900">Luxury</div>
                                        <div class="text-sm text-gray-600">5-star hotels, fine dining</div>
                                    </button>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-3">What interests you? (Select all that apply)</label>
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                                    <button type="button" class="interest-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 text-gray-700 transition-all flex items-center space-x-2" data-interest="culture">
                                        <i data-lucide="camera" class="h-5 w-5"></i>
                                        <span class="text-sm font-medium">Culture & History</span>
                                    </button>
                                    <button type="button" class="interest-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 text-gray-700 transition-all flex items-center space-x-2" data-interest="food">
                                        <i data-lucide="utensils" class="h-5 w-5"></i>
                                        <span class="text-sm font-medium">Food & Dining</span>
                                    </button>
                                    <button type="button" class="interest-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 text-gray-700 transition-all flex items-center space-x-2" data-interest="nightlife">
                                        <i data-lucide="music" class="h-5 w-5"></i>
                                        <span class="text-sm font-medium">Nightlife</span>
                                    </button>
                                    <button type="button" class="interest-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 text-gray-700 transition-all flex items-center space-x-2" data-interest="nature">
                                        <i data-lucide="map-pin" class="h-5 w-5"></i>
                                        <span class="text-sm font-medium">Nature & Outdoors</span>
                                    </button>
                                    <button type="button" class="interest-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 text-gray-700 transition-all flex items-center space-x-2" data-interest="adventure">
                                        <i data-lucide="zap" class="h-5 w-5"></i>
                                        <span class="text-sm font-medium">Adventure Sports</span>
                                    </button>
                                    <button type="button" class="interest-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 text-gray-700 transition-all flex items-center space-x-2" data-interest="relaxation">
                                        <i data-lucide="users" class="h-5 w-5"></i>
                                        <span class="text-sm font-medium">Relaxation</span>
                                    </button>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-3">Food Preferences</label>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                    <button type="button" class="food-btn p-2 rounded-lg border transition-all text-sm border-gray-200 hover:border-gray-300 text-gray-700" data-food="Local Cuisine">Local Cuisine</button>
                                    <button type="button" class="food-btn p-2 rounded-lg border transition-all text-sm border-gray-200 hover:border-gray-300 text-gray-700" data-food="Fine Dining">Fine Dining</button>
                                    <button type="button" class="food-btn p-2 rounded-lg border transition-all text-sm border-gray-200 hover:border-gray-300 text-gray-700" data-food="Street Food">Street Food</button>
                                    <button type="button" class="food-btn p-2 rounded-lg border transition-all text-sm border-gray-200 hover:border-gray-300 text-gray-700" data-food="Vegetarian">Vegetarian</button>
                                    <button type="button" class="food-btn p-2 rounded-lg border transition-all text-sm border-gray-200 hover:border-gray-300 text-gray-700" data-food="Vegan">Vegan</button>
                                    <button type="button" class="food-btn p-2 rounded-lg border transition-all text-sm border-gray-200 hover:border-gray-300 text-gray-700" data-food="No Restrictions">No Restrictions</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Final Details -->
                    <div id="step3" class="step hidden">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Final touches</h2>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-3">Accommodation Preference</label>
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
                                    <button type="button" class="accommodation-btn p-3 rounded-lg border-2 border-blue-600 bg-blue-50 transition-all" data-accommodation="hotel">
                                        <div class="font-medium text-gray-900">Hotels</div>
                                    </button>
                                    <button type="button" class="accommodation-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 transition-all" data-accommodation="airbnb">
                                        <div class="font-medium text-gray-900">Airbnb</div>
                                    </button>
                                    <button type="button" class="accommodation-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 transition-all" data-accommodation="hostel">
                                        <div class="font-medium text-gray-900">Hostels</div>
                                    </button>
                                    <button type="button" class="accommodation-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 transition-all" data-accommodation="mixed">
                                        <div class="font-medium text-gray-900">Mix of All</div>
                                    </button>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Custom Activities (Optional)</label>
                                <textarea id="customActivities" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 h-24 resize-none" placeholder="Any specific activities, restaurants, or places you want to include? e.g., 'Visit the Louvre Museum', 'Try authentic ramen in Shibuya'"></textarea>
                            </div>

                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h3 class="font-semibold text-blue-900 mb-2">What happens next?</h3>
                                <ul class="text-sm text-blue-800 space-y-1">
                                    <li>• AI generates your personalized itinerary in minutes</li>
                                    <li>• Get a free draft to review and customize</li>
                                    <li>• Upgrade to book flights, hotels, and activities</li>
                                    <li>• Receive professional PDF with maps and confirmations</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="flex justify-between items-center mt-8 pt-6 border-t border-gray-200">
                        <button id="prevBtn" onclick="previousStep()" class="bg-gray-200 hover:bg-gray-300 text-gray-900 font-medium py-2 px-4 rounded-lg transition-colors duration-200 hidden">
                            Previous
                        </button>
                        
                        <div class="flex space-x-3">
                            <button id="nextBtn" onclick="nextStep()" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition-colors duration-200 flex items-center space-x-2">
                                <span>Next</span>
                                <i data-lucide="arrow-right" class="h-4 w-4"></i>
                            </button>
                            <button id="generateBtn" onclick="generateItinerary()" class="hidden bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-6 rounded-lg transition-colors duration-200 flex items-center space-x-2">
                                <span>Generate Itinerary</span>
                                <i data-lucide="zap" class="h-4 w-4"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center space-x-2 mb-4 cursor-pointer" onclick="window.location.href='index.html'">
                        <div class="bg-blue-600 p-2 rounded-lg">
                            <i data-lucide="plane" class="h-6 w-6 text-white"></i>
                        </div>
                        <span class="text-xl font-bold">TravelAI</span>
                    </div>
                    <p class="text-gray-300 mb-6 max-w-md">Your trip, planned in minutes. Experience stress-free travel with AI-powered itinerary generation that saves you time and money.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-300 hover:text-white transition-colors">Home</a></li>
                        <li><a href="plan.html" class="text-gray-300 hover:text-white transition-colors">Plan Trip</a></li>
                        <li><a href="pricing.html" class="text-gray-300 hover:text-white transition-colors">Pricing</a></li>
                        <li><a href="about.html" class="text-gray-300 hover:text-white transition-colors">About</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact</h3>
                    <p class="text-gray-300">support@travelai.com</p>
                    <p class="text-gray-300">San Francisco, CA</p>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center">
                <p class="text-gray-400 text-sm">© 2024 TravelAI. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global variables
        let currentStepNum = 1;
        let formData = {
            destination: '',
            startDate: '',
            endDate: '',
            travelers: 2,
            budget: 5000,
            budgetType: 'total',
            travelStyle: 'balanced',
            interests: [],
            foodPreferences: [],
            accommodationType: 'hotel',
            customActivities: ''
        };

        // Trip planning steps
        function nextStep() {
            if (!validateCurrentStep()) return;
            
            if (currentStepNum < 3) {
                document.getElementById('step' + currentStepNum).classList.add('hidden');
                currentStepNum++;
                document.getElementById('step' + currentStepNum).classList.remove('hidden');
                updateProgress();
                
                if (currentStepNum === 3) {
                    document.getElementById('nextBtn').classList.add('hidden');
                    document.getElementById('generateBtn').classList.remove('hidden');
                }
                
                document.getElementById('prevBtn').classList.remove('hidden');
            }
        }

        function previousStep() {
            if (currentStepNum > 1) {
                document.getElementById('step' + currentStepNum).classList.add('hidden');
                currentStepNum--;
                document.getElementById('step' + currentStepNum).classList.remove('hidden');
                updateProgress();
                
                if (currentStepNum === 1) {
                    document.getElementById('prevBtn').classList.add('hidden');
                }
                
                if (currentStepNum < 3) {
                    document.getElementById('nextBtn').classList.remove('hidden');
                    document.getElementById('generateBtn').classList.add('hidden');
                }
            }
        }

        function updateProgress() {
            const progress = (currentStepNum / 3) * 100;
            document.getElementById('currentStep').textContent = currentStepNum;
            document.getElementById('progressPercent').textContent = Math.round(progress);
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function validateCurrentStep() {
            switch (currentStepNum) {
                case 1:
                    const destination = document.getElementById('destination').value;
                    const startDate = document.getElementById('startDate').value;
                    const endDate = document.getElementById('endDate').value;
                    
                    if (!destination || !startDate || !endDate) {
                        alert('Please fill in all required fields');
                        return false;
                    }
                    
                    formData.destination = destination;
                    formData.startDate = startDate;
                    formData.endDate = endDate;
                    formData.travelers = parseInt(document.getElementById('travelers').value);
                    return true;
                    
                case 2:
                    const budget = document.getElementById('budget').value;
                    const interests = document.querySelectorAll('.interest-btn.border-blue-600');
                    
                    if (!budget || interests.length === 0) {
                        alert('Please set your budget and select at least one interest');
                        return false;
                    }
                    
                    formData.budget = parseInt(budget);
                    formData.budgetType = document.getElementById('budgetType').value;
                    formData.travelStyle = document.querySelector('.travel-style.border-blue-600').dataset.style;
                    formData.interests = Array.from(interests).map(btn => btn.dataset.interest);
                    
                    const foodPrefs = document.querySelectorAll('.food-btn.border-blue-600');
                    formData.foodPreferences = Array.from(foodPrefs).map(btn => btn.dataset.food);
                    return true;
                    
                case 3:
                    formData.customActivities = document.getElementById('customActivities').value;
                    formData.accommodationType = document.querySelector('.accommodation-btn.border-blue-600').dataset.accommodation;
                    return true;
            }
            return false;
        }

        // Generate itinerary
        function generateItinerary() {
            if (!validateCurrentStep()) return;
            
            // Redirect to results page with data
            const params = new URLSearchParams();
            Object.keys(formData).forEach(key => {
                if (Array.isArray(formData[key])) {
                    params.append(key, JSON.stringify(formData[key]));
                } else {
                    params.append(key, formData[key]);
                }
            });
            
            window.location.href = `results.html?${params.toString()}`;
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Travel style selection
            document.querySelectorAll('.travel-style').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.travel-style').forEach(b => {
                        b.classList.remove('border-blue-600', 'bg-blue-50');
                        b.classList.add('border-gray-200');
                    });
                    this.classList.remove('border-gray-200');
                    this.classList.add('border-blue-600', 'bg-blue-50');
                });
            });

            // Interest selection
            document.querySelectorAll('.interest-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.classList.toggle('border-blue-600');
                    this.classList.toggle('bg-blue-50');
                    this.classList.toggle('text-blue-700');
                    this.classList.toggle('border-gray-200');
                    this.classList.toggle('text-gray-700');
                });
            });

            // Food preference selection
            document.querySelectorAll('.food-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.classList.toggle('border-blue-600');
                    this.classList.toggle('bg-blue-50');
                    this.classList.toggle('text-blue-700');
                    this.classList.toggle('border-gray-200');
                    this.classList.toggle('text-gray-700');
                });
            });

            // Accommodation selection
            document.querySelectorAll('.accommodation-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.accommodation-btn').forEach(b => {
                        b.classList.remove('border-blue-600', 'bg-blue-50');
                        b.classList.add('border-gray-200');
                    });
                    this.classList.remove('border-gray-200');
                    this.classList.add('border-blue-600', 'bg-blue-50');
                });
            });
        });
    </script>
</body>
</html>
